# Yosys synthesis script for udma_core
plugin -i ql-qlf
# Print all commands to log before executing them.
echo on
# Add include directory for Verific mode
verific -vlog-incdir ./udma_core/rtl
verific -vlog-incdir ./common_cells/src/
verific -vlog-incdir ./common_cells/include/
# Add library directory for Verific mode
# Read hdl files into specified library

# Read sv files
verific  -sv ./common_cells/src/binary_to_gray.sv
verific  -sv ./common_cells/src/sync.sv
verific  -sv ./common_cells/src/deprecated/pulp_sync.sv
verific  -sv ./common_cells/src/deprecated/pulp_sync_wedge.sv
verific  -sv ./common_cells/src/spill_register.sv
verific  -sv ./common_cells/src/spill_register_flushable.sv
verific  -sv ./common_cells/src/gray_to_binary.sv
verific  -sv ./tech_cells_generic/src/deprecated/pulp_clock_gating_async.sv
verific  -sv ./tech_cells_generic/src/rtl/tc_clk.sv
verific  -sv ./tech_cells_generic/src/deprecated/pulp_clk_cells.sv
verific  -sv ./common_cells/src/cdc_fifo_gray.sv
verific  -sv ./udma_core/rtl/common/io_clk_gen.sv
verific  -sv ./udma_core/rtl/common/io_event_counter.sv
verific  -sv ./udma_core/rtl/common/io_generic_fifo.sv
verific  -sv ./udma_core/rtl/common/io_shiftreg.sv
verific  -sv ./udma_core/rtl/common/udma_apb_if.sv
verific  -sv ./udma_core/rtl/common/udma_clk_div_cnt.sv
verific  -sv ./udma_core/rtl/common/udma_ctrl.sv
verific  -sv ./udma_core/rtl/common/udma_dc_fifo.sv
verific  -sv ./udma_core/rtl/core/udma_arbiter.sv
verific  -sv ./udma_core/rtl/core/udma_ch_addrgen.sv
verific  -sv ./udma_core/rtl/common/io_tx_fifo.sv
verific  -sv ./udma_core/rtl/common/io_tx_fifo_dc.sv
verific  -sv ./udma_core/rtl/common/io_tx_fifo_mark.sv
verific  -sv ./udma_core/rtl/common/udma_clkgen.sv
verific  -sv ./udma_core/rtl/core/udma_tx_channels.sv
verific  -sv ./udma_core/rtl/core/udma_stream_unit.sv
verific  -sv ./udma_core/rtl/core/udma_rx_channels.sv
verific  -sv ./udma_core/rtl/core/udma_core.sv

# Import to Yosys for Verific mode
verific -import -all udma_core
# Mark cell simulation library modules as BLACKBOX

synth -top udma_core

write_blif udma_core_yosys_out.blif
write_verilog -noattr -nohex udma_core_output_verilog.v

