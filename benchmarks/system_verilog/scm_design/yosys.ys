# Yosys synthesis script for scm
plugin -i ql-qlf
# Print all commands to log before executing them.
echo on
# Add include directory for Verific mode
verific -vlog-incdir ./scm/fpga_scm/
# Add library directory for Verific mode

# Read hdl files into specified library

# Read sv files
verific  -sv ./scm/fpga_scm/register_file_1r_1w_all.sv 
verific  -sv ./scm/fpga_scm/register_file_1r_1w_be.sv 
verific  -sv ./scm/fpga_scm/register_file_1r_1w.sv 
verific  -sv ./scm/fpga_scm/register_file_1r_1w_1row.sv 
verific  -sv ./scm/fpga_scm/register_file_1r_1w_raw.sv 
verific  -sv ./scm/fpga_scm/register_file_1w_multi_port_read.sv 
verific  -sv ./scm/fpga_scm/register_file_1w_64b_multi_port_read_32b.sv 
verific  -sv ./scm/fpga_scm/register_file_1w_64b_1r_32b.sv 
verific  -sv ./scm/fpga_scm/register_file_2r_1w_asymm.sv 
verific  -sv ./scm/fpga_scm/register_file_2r_1w_asymm_test_wrap.sv 
verific  -sv ./scm/fpga_scm/register_file_2r_2w.sv 
verific  -sv ./scm/fpga_scm/register_file_3r_2w.sv 
verific  -sv ./scm/fpga_scm/register_file_3r_2w_be.sv 
verific  -sv ./common/xpm_memory_tdpram.sv 

# Import to Yosys for Verific mode
verific -import -all register_file_2r_1w_asymm_test_wrap

# Mark cell simulation library modules as BLACKBOX
blackbox \xpm_memory_tdpram

synth_ql -blif register_file_2r_1w_asymm_test_wrap_yosys_out.blif -top register_file_2r_1w_asymm_test_wrap -no_adder -family qlf_k4n8 -no_ff_map

write_verilog -noattr -nohex register_file_2r_1w_asymm_test_wrap_output_verilog.v
